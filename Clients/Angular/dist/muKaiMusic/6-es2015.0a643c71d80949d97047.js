(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"5+r1":function(t,e,n){"use strict";n.r(e),n.d(e,"ExploreModule",(function(){return B}));var o=n("ofXK"),i=n("tyNb"),s=n("fXoL"),l=n("FKr1"),r=n("nLfN");const c=["*",[["mat-toolbar-row"]]],a=["*","mat-toolbar-row"];class u{constructor(t){this._elementRef=t}}const p=Object(l.i)(u);let h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Jb({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),b=(()=>{class t extends p{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){Object(s.V)()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter(t=>!(t.classList&&t.classList.contains("mat-toolbar-row"))).filter(t=>t.nodeType!==(this._document?this._document.COMMENT_NODE:8)).some(t=>!(!t.textContent||!t.textContent.trim()))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(s.l),s.Ob(r.a),s.Ob(o.c))},t.\u0275cmp=s.Ib({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){var o;1&t&&s.Hb(n,h,!0),2&t&&s.lc(o=s.cc())&&(e._toolbarRows=o)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&s.Fb("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[s.yb],ngContentSelectors:a,decls:2,vars:0,template:function(t,e){1&t&&(s.hc(c),s.gc(0),s.gc(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}\n"],encapsulation:2,changeDetection:0}),t})(),d=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[l.d],l.d]}),t})();var m=n("a7lh"),g=n("NFeN"),f=n("3Pt+");let w=(()=>{class t{constructor(t,e){this.theme=t,this.router=e,this._placeholder="",this._value="",this.inputComplete=new s.n,this.router.events.subscribe(t=>{if(t instanceof i.b&&t.url.includes("/search/")){let e=t.url.substring(t.url.indexOf("/search/")+8);this._value=decodeURI(decodeURI(e))}})}ngOnInit(){let t=document.getElementById("search");t.onfocus=()=>{window.onkeypress=t=>{"Enter"==t.key&&""!=this.value&&this.inputComplete.emit(this.value)}},t.onblur=()=>{window.onkeypress=null}}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t}get value(){return this._value}set value(t){this._value=t}get themeClass(){return this.theme.getThemeClass()}iconClick(){""!=this.value&&this.inputComplete.emit(this.value)}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(m.a),s.Ob(i.c))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-searchbar"]],inputs:{placeholder:"placeholder",value:"value"},outputs:{inputComplete:"inputComplete"},decls:4,vars:5,consts:[["id","search-box"],["id","search-icon",3,"click"],["id","search",3,"ngModel","placeholder","ngModelChange"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"mat-icon",1),s.bc("click",(function(){return e.iconClick()})),s.uc(2,"search"),s.Sb(),s.Tb(3,"input",2),s.bc("ngModelChange",(function(t){return e.value=t})),s.Sb(),s.Sb()),2&t&&(s.Db(e.themeClass),s.Bb(3),s.ic("ngModel",e.value)("placeholder",e.placeholder))},directives:[g.a,f.b,f.h,f.k],styles:["#search-box[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;border-radius:10px;background-color:#3c3c3c;position:relative}#search-icon[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.3);margin:auto 0 auto 10px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#search-icon[_ngcontent-%COMP%]:hover{color:currentColor}#search[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.3);position:relative;margin-left:10px;max-width:65%;border:none;background-color:#3c3c3c;height:90%;outline:none;font-size:16px}#search[_ngcontent-%COMP%]:focus{color:#fff}"]}),t})(),y=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}search(t){this.router.navigate(["/content/explore/search",t])}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(i.c))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-explore"]],decls:5,vars:0,consts:[["id","toolbar"],["id","title"],["placeholder","\u641c\u7d22\u97f3\u4e50",3,"inputComplete"]],template:function(t,e){1&t&&(s.Tb(0,"mat-toolbar",0),s.Tb(1,"span",1),s.uc(2,"\u97f3\u4e50\u9986"),s.Sb(),s.Tb(3,"app-searchbar",2),s.bc("inputComplete",(function(t){return e.search(t)})),s.Sb(),s.Sb(),s.Pb(4,"router-outlet"))},directives:[b,w,i.f],styles:["#toolbar[_ngcontent-%COMP%]{margin-top:25px;position:relative;width:100%;height:54px}#title[_ngcontent-%COMP%]{color:#fff;font-size:54px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}app-searchbar[_ngcontent-%COMP%]{position:relative;width:175px;height:32px;margin-left:20px;align-self:flex-end}"]}),t})();var v=n("WhCV"),x=n("f1e1");function _(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",3),s.Tb(1,"div",4),s.Tb(2,"mat-icon",5),s.bc("click",(function(){s.nc(t);const n=e.$implicit;return s.fc().playAll(n)})),s.uc(3,"play_circle_outline"),s.Sb(),s.Sb(),s.Pb(4,"img",6),s.Tb(5,"span"),s.uc(6),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Bb(4),s.ic("src",t.picUrl,s.oc),s.Bb(2),s.vc(t.name)}}let O=(()=>{class t{constructor(t,e){this.musicNet=t,this.player=e,this.playlists=[]}ngOnInit(){this.musicNet.getPersonalizedPlaylist().subscribe(t=>{200==t.code?this.playlists=t.content:alert("\u670d\u52a1\u51fa\u9519\u4e86!")})}playAll(t){document.body.style.cursor="wait",this.musicNet.getPlaylistDetail(t.id).subscribe(t=>{200==t.code?(this.player.initPlaylist(t.content.musics,0),this.player.start(t.content.musics[0])):alert(t.error),document.body.style.cursor="default"})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(v.a),s.Ob(x.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-boutique"]],decls:4,vars:1,consts:[["id","recommend-playlist"],["id","playlist-title"],["class","playlist-item",4,"ngFor","ngForOf"],[1,"playlist-item"],[1,"playlist-option"],[3,"click"],[3,"src"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.uc(2,"\u63a8\u8350\u6b4c\u5355"),s.Sb(),s.tc(3,_,7,2,"div",2),s.Sb()),2&t&&(s.Bb(3),s.ic("ngForOf",e.playlists))},directives:[o.h,g.a],styles:["#recommend-playlist[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-content:flex-start;position:relative}#playlist-title[_ngcontent-%COMP%]{position:absolute;color:#fff;left:1%;top:3%}.playlist-item[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 17%;margin-top:55px;margin-left:10px;margin-right:10px;cursor:pointer;position:relative}.playlist-item[_ngcontent-%COMP%]:hover   .playlist-option[_ngcontent-%COMP%]{opacity:1}.playlist-item[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{-webkit-filter:brightness(.5);filter:brightness(.5);transform:translateY(-10px)}.playlist-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition-duration:.2s;transition-timing-function:ease-in-out;width:90%}.playlist-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flow-root;color:hsla(0,0%,100%,.8)}.playlist-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#2196f3}.playlist-option[_ngcontent-%COMP%]{transition-timing-function:ease-in-out;transition-duration:.3s;opacity:0;position:absolute;margin:auto;left:0;right:0;top:25%;color:hsla(0,0%,100%,.8);z-index:10}.playlist-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;height:100%;width:100%}"]}),t})();var C=n("mrSG"),M=n("73Qz"),P=n("dNgK"),T=n("Xa2L");function S(t,e){if(1&t){const t=s.Ub();s.Tb(0,"li",13),s.Tb(1,"div",14),s.Tb(2,"mat-icon",15),s.bc("click",(function(){s.nc(t);const n=e.$implicit;return s.fc().addToPlaylist(n)})),s.uc(3,"add"),s.Sb(),s.Tb(4,"mat-icon",16),s.bc("click",(function(){s.nc(t);const n=e.$implicit;return s.fc().startPlay(n)})),s.uc(5,"play_circle_outline"),s.Sb(),s.Sb(),s.Tb(6,"div",17),s.Tb(7,"div",3),s.Tb(8,"span"),s.uc(9),s.Sb(),s.Sb(),s.Tb(10,"div",4),s.Tb(11,"span"),s.uc(12),s.Sb(),s.Sb(),s.Tb(13,"div",5),s.Tb(14,"span"),s.uc(15),s.Sb(),s.Sb(),s.Tb(16,"div",6),s.Pb(17,"img",18),s.Sb(),s.Sb(),s.Pb(18,"i"),s.Sb()}if(2&t){const t=e.$implicit;s.Bb(9),s.vc(t.name),s.Bb(3),s.vc(t.artists[0].name),s.Bb(3),s.vc(t.album.name||"\u672a\u77e5\u4e13\u8f91"),s.Bb(2),s.ic("src",t.album.picUrl,s.oc)}}function k(t,e){1&t&&s.Pb(0,"mat-spinner",19)}const I=[{path:"",component:y,children:[{path:"boutique",component:O},{path:"search/:key",component:(()=>{class t{constructor(t,e,n,o,i){this.route=t,this.snackBar=e,this.musicNet=n,this.player=o,this.theme=i,this.allowScroll=!1,this.searchResult=[],this.isloading=!1}ngOnInit(){this.route.paramMap.subscribe(t=>{this.search(decodeURI(t.get("key"))),this.isloading=!0});let t=document.getElementById("result-container"),e=document.getElementById("r-scroll"),n=document.getElementById("r-bar"),o=document.getElementById("r-ul"),i=0;n.onmousedown=function(s){let l=s.clientY-n.offsetTop;document.onmousemove=function(s){let r=s.clientY-l;r=r<0?0:r,r=r>e.offsetHeight-n.offsetHeight?e.offsetHeight-n.offsetHeight:r,i=r,n.style.top=r+"px",o.style.top=-r*(o.offsetHeight-t.offsetHeight)/(e.offsetHeight-n.offsetHeight)+"px"}},document.onmouseup=function(){document.onmousemove=null},t.onmouseenter=t=>{this.allowScroll=!0},t.onmouseleave=t=>{this.allowScroll=!1},window.addEventListener("mousewheel",s=>{if(this.allowScroll){i+=s.deltaY/5,i=i<0?0:i,i=i>e.clientHeight-n.clientHeight?e.clientHeight-n.clientHeight:i;var l=i;n.style.top=l+"px",o.style.top=-l*(o.offsetHeight-t.offsetHeight)/(e.offsetHeight-n.offsetHeight)+"px"}})}search(t){return Object(C.a)(this,void 0,void 0,(function*(){this.isloading=!0,this.searchResult=[],this.musicNet.searchMusic(t).subscribe(t=>{this.isloading=!1,this.searchResult=t.content,window.setTimeout(this.initScroll,100)})}))}initScroll(){let t=document.getElementById("r-ul"),e=document.getElementById("result-container"),n=document.getElementById("r-scroll"),o=document.getElementById("r-bar"),i=0,s="hidden";this.allowScroll=!1,i=e.offsetHeight*n.offsetHeight/t.offsetHeight,s="visible",this.allowScroll=!0,o.style.height=i+"px",n.style.visibility="visible"}get themeClass(){return this.theme.getThemeClass()}startPlay(t){t.url?this.player.addAndPlay(t):this.musicNet.getUrl(t).subscribe(e=>{200!=e.code||null==e.content?this.snackBar.openFromComponent(M.a,{duration:2500,data:"\u8fd9\u9996\u6b4c\u4e0d\u8ba9\u542c\u4e86\uff0c\u8bd5\u8bd5\u5176\u4ed6\u7684\u5427!"}):(t.url=e.content,this.player.addAndPlay(t))})}addToPlaylist(t){this.player.addToPlaylist(t)}getTimeFormat(t){return null==t?null:Math.floor(t/60).toString().padStart(2,"0")+":"+Math.floor(t%60).toString().padStart(2,"0")}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(i.a),s.Ob(P.a),s.Ob(v.a),s.Ob(x.b),s.Ob(m.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-search-result"]],decls:19,vars:4,consts:[["id","search-container"],["id","title-bar",1,"result-title"],["id","title-item",1,"result-item"],[1,"result-name"],[1,"result-artist"],[1,"result-album"],[1,"result-pic"],["id","result-container"],["id","r-ul"],["class","result-title",4,"ngFor","ngForOf"],["value","100","color","accent","id","spinner",4,"ngIf"],["id","r-scroll",1,"scroll"],["id","r-bar",1,"bar"],[1,"result-title"],[1,"option"],["title","\u6dfb\u52a0\u5230\u64ad\u653e\u5217\u8868",3,"click"],["title","\u64ad\u653e\u6b64\u66f2",3,"click"],[1,"result-item"],["onerror","this.src='../../../assets/img/music_white.jpg'",3,"src"],["value","100","color","accent","id","spinner"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"li",1),s.Tb(2,"div",2),s.Tb(3,"div",3),s.Tb(4,"span"),s.uc(5,"\u6b4c\u66f2"),s.Sb(),s.Sb(),s.Tb(6,"div",4),s.Tb(7,"span"),s.uc(8,"\u827a\u672f\u5bb6"),s.Sb(),s.Sb(),s.Tb(9,"div",5),s.Tb(10,"span"),s.uc(11,"\u4e13\u8f91"),s.Sb(),s.Sb(),s.Pb(12,"div",6),s.Sb(),s.Sb(),s.Tb(13,"div",7),s.Tb(14,"div",8),s.tc(15,S,19,4,"li",9),s.Sb(),s.Sb(),s.tc(16,k,1,0,"mat-spinner",10),s.Tb(17,"div",11),s.Pb(18,"div",12),s.Sb(),s.Sb()),2&t&&(s.Db(e.themeClass),s.Bb(15),s.ic("ngForOf",e.searchResult),s.Bb(1),s.ic("ngIf",e.isloading))},directives:[o.h,o.i,g.a,T.b],styles:["#search-container[_ngcontent-%COMP%]{height:85%;position:relative;padding:0 16px;display:block}#spinner[_ngcontent-%COMP%]{top:10%;left:40%;position:absolute}.result-title[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.6);list-style:none;width:85%;min-width:670px;position:relative;margin:20px auto;height:30px;display:inline-flex}.result-title[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{min-width:520px;width:80%;margin:auto;display:flex}.result-title[_ngcontent-%COMP%]   #title-item[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;width:100%;height:1px;background-color:#fff;opacity:.1;position:absolute}#title-bar[_ngcontent-%COMP%]{padding-left:8%}#result-container[_ngcontent-%COMP%]{max-height:90%;height:90%;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}#result-container[_ngcontent-%COMP%]   #r-ul[_ngcontent-%COMP%]{transition-duration:.2s;transition-timing-function:ease-out;position:absolute;clear:both;width:100%}.option[_ngcontent-%COMP%]{width:10%;margin:20px 0 0;white-space:nowrap}.option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 10px;cursor:pointer}.option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#fff}.result-name[_ngcontent-%COMP%]{width:50%;text-align:left;position:relative;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.result-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:64px}.result-artist[_ngcontent-%COMP%]{width:25%;text-align:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.result-artist[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:64px}.result-album[_ngcontent-%COMP%]{width:20%;text-align:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.result-album[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:64px}.result-time[_ngcontent-%COMP%]{min-width:40px}.result-pic[_ngcontent-%COMP%]{min-width:60px}.result-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;padding-top:5px;-o-object-fit:cover;object-fit:cover}.scroll[_ngcontent-%COMP%]{width:8px;height:90%;background-color:hsla(0,0%,100%,.2);visibility:hidden;right:5%;top:5%}.bar[_ngcontent-%COMP%], .scroll[_ngcontent-%COMP%]{border-radius:5px;position:absolute}.bar[_ngcontent-%COMP%]{width:100%;height:0;background-color:rgba(0,0,0,.5);cursor:pointer}"]}),t})()}]}];let B=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[f.d,P.b,T.a,d,g.b,o.b,i.e.forChild(I)]]}),t})()}}]);