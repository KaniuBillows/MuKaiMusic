(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"5+r1":function(t,e,n){"use strict";n.r(e),n.d(e,"ExploreModule",(function(){return E}));var o=n("ofXK"),i=n("tyNb"),s=n("fXoL"),r=n("FKr1"),l=n("nLfN");const c=["*",[["mat-toolbar-row"]]],a=["*","mat-toolbar-row"];class p{constructor(t){this._elementRef=t}}const u=Object(r.i)(p);let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Hb({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),h=(()=>{class t extends u{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){Object(s.V)()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter(t=>!(t.classList&&t.classList.contains("mat-toolbar-row"))).filter(t=>t.nodeType!==(this._document?this._document.COMMENT_NODE:8)).some(t=>!(!t.textContent||!t.textContent.trim()))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.l),s.Mb(l.a),s.Mb(o.c))},t.\u0275cmp=s.Gb({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){var o;1&t&&s.Fb(n,b,!0),2&t&&s.ic(o=s.Zb())&&(e._toolbarRows=o)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&s.Db("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[s.wb],ngContentSelectors:a,decls:2,vars:0,template:function(t,e){1&t&&(s.ec(c),s.dc(0),s.dc(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}\n"],encapsulation:2,changeDetection:0}),t})(),d=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[r.d],r.d]}),t})();var m=n("a7lh"),g=n("NFeN"),f=n("3Pt+");let w=(()=>{class t{constructor(t,e){this.theme=t,this.router=e,this._placeholder="",this._value="",this.inputComplete=new s.n,this.router.events.subscribe(t=>{if(t instanceof i.b&&t.url.includes("/search/")){let e=t.url.substring(t.url.indexOf("/search/")+8);this._value=decodeURI(decodeURI(e))}})}ngOnInit(){let t=document.getElementById("search");t.onfocus=()=>{window.onkeypress=t=>{"Enter"==t.key&&""!=this.value&&this.inputComplete.emit(this.value)}},t.onblur=()=>{window.onkeypress=null}}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t}get value(){return this._value}set value(t){this._value=t}get themeClass(){return this.theme.getThemeClass()}iconClick(){""!=this.value&&this.inputComplete.emit(this.value)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(m.a),s.Mb(i.c))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-searchbar"]],inputs:{placeholder:"placeholder",value:"value"},outputs:{inputComplete:"inputComplete"},decls:4,vars:5,consts:[["id","search-box"],["id","search-icon",3,"click"],["id","search",3,"ngModel","placeholder","ngModelChange"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"mat-icon",1),s.Yb("click",(function(){return e.iconClick()})),s.rc(2,"search"),s.Qb(),s.Rb(3,"input",2),s.Yb("ngModelChange",(function(t){return e.value=t})),s.Qb(),s.Qb()),2&t&&(s.Bb(e.themeClass),s.zb(3),s.fc("ngModel",e.value)("placeholder",e.placeholder))},directives:[g.a,f.b,f.h,f.k],styles:["#search-box[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;border-radius:10px;background-color:#3c3c3c;position:relative}#search-icon[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.3);margin:auto 0 auto 10px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#search-icon[_ngcontent-%COMP%]:hover{color:currentColor}#search[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.3);position:relative;margin-left:10px;max-width:65%;border:none;background-color:#3c3c3c;height:90%;outline:none;font-size:16px}#search[_ngcontent-%COMP%]:focus{color:#fff}"]}),t})(),y=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}search(t){this.router.navigate(["/content/explore/search",t])}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(i.c))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-explore"]],decls:5,vars:0,consts:[["id","toolbar"],["id","title"],["placeholder","\u641c\u7d22\u97f3\u4e50",3,"inputComplete"]],template:function(t,e){1&t&&(s.Rb(0,"mat-toolbar",0),s.Rb(1,"span",1),s.rc(2,"\u97f3\u4e50\u9986"),s.Qb(),s.Rb(3,"app-searchbar",2),s.Yb("inputComplete",(function(t){return e.search(t)})),s.Qb(),s.Qb(),s.Nb(4,"router-outlet"))},directives:[h,w,i.f],styles:["#toolbar[_ngcontent-%COMP%]{margin-top:25px;position:relative;width:100%;height:54px}#title[_ngcontent-%COMP%]{color:#fff;font-size:54px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}app-searchbar[_ngcontent-%COMP%]{position:relative;width:175px;height:32px;margin-left:20px;align-self:flex-end}"]}),t})();var x=n("WhCV"),M=n("f1e1");class _{constructor(t){this.content=t.content,this.expire=t.expire}}function C(t,e){if(1&t){const t=s.Sb();s.Rb(0,"div",3),s.Rb(1,"div",4),s.Rb(2,"mat-icon",5),s.Yb("click",(function(){s.kc(t);const n=e.$implicit;return s.cc().playAll(n)})),s.rc(3,"play_circle_outline"),s.Qb(),s.Qb(),s.Nb(4,"img",6),s.Rb(5,"span"),s.rc(6),s.Qb(),s.Qb()}if(2&t){const t=e.$implicit;s.zb(4),s.fc("src",t.picUrl,s.lc),s.zb(2),s.sc(t.name)}}let v=(()=>{class t{constructor(t,e){this.musicNet=t,this.player=e,this.expire=216e5,this.playlists=[]}ngOnInit(){this.initPlaylists()}playAll(t){document.body.style.cursor="wait",this.musicNet.getPlaylistDetail(t.id).subscribe(t=>{200==t.code?(this.player.initPlaylist(t.content.musics,0),this.player.start(t.content.musics[0])):alert(t.message),document.body.style.cursor="default"})}initPlaylists(){let e=localStorage.getItem(t.personlizedPlaylistKey);if(e){let t=JSON.parse(e);if(t.expire>new Date)return void(this.playlists=t.content)}this.musicNet.getPersonalizedPlaylist().subscribe(e=>{200==e.code?(this.playlists=e.content,window.setTimeout(()=>{localStorage.setItem(t.personlizedPlaylistKey,JSON.stringify(new _({content:e.content,expire:new Date(Date.now()+this.expire)})))},0)):alert("\u670d\u52a1\u51fa\u9519\u4e86!")})}}return t.personlizedPlaylistKey="PERSONLIZEDPLAYLISTKEY",t.\u0275fac=function(e){return new(e||t)(s.Mb(x.a),s.Mb(M.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-boutique"]],decls:4,vars:1,consts:[["id","recommend-playlist"],["id","playlist-title"],["class","playlist-item",4,"ngFor","ngForOf"],[1,"playlist-item"],[1,"playlist-option"],[3,"click"],[3,"src"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"span",1),s.rc(2,"\u63a8\u8350\u6b4c\u5355"),s.Qb(),s.qc(3,C,7,2,"div",2),s.Qb()),2&t&&(s.zb(3),s.fc("ngForOf",e.playlists))},directives:[o.h,g.a],styles:["#recommend-playlist[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-content:flex-start;position:relative}#playlist-title[_ngcontent-%COMP%]{position:absolute;color:#fff;left:20px;top:20px}.playlist-item[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 17%;margin-top:55px;margin-left:10px;margin-right:10px;cursor:pointer;position:relative}.playlist-item[_ngcontent-%COMP%]:hover   .playlist-option[_ngcontent-%COMP%]{opacity:1}.playlist-item[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{-webkit-filter:brightness(.5);filter:brightness(.5);transform:translateY(-10px)}.playlist-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition-duration:.2s;transition-timing-function:ease-in-out;width:90%}.playlist-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flow-root;color:hsla(0,0%,100%,.8)}.playlist-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#2196f3}.playlist-option[_ngcontent-%COMP%]{transition-timing-function:ease-in-out;transition-duration:.3s;opacity:0;position:absolute;margin:auto;left:0;right:0;top:25%;color:hsla(0,0%,100%,.8);z-index:10}.playlist-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;height:100%;width:100%}"]}),t})();var P=n("mrSG"),O=n("73Qz"),R=n("Ip76"),k=n("jZ9z"),Q=n("DTtR"),z=n("LNhG"),N=n("dNgK"),T=n("Xa2L");function I(t,e){if(1&t){const t=s.Sb();s.Rb(0,"li",11),s.Rb(1,"div",12),s.Rb(2,"mat-icon",13),s.Yb("click",(function(){s.kc(t);const n=e.$implicit;return s.cc().addToPlaylist(n)})),s.rc(3,"add"),s.Qb(),s.Rb(4,"mat-icon",14),s.Yb("click",(function(){s.kc(t);const n=e.$implicit;return s.cc().startPlay(n)})),s.rc(5,"play_circle_outline"),s.Qb(),s.Qb(),s.Rb(6,"div",15),s.Rb(7,"div",3),s.Rb(8,"span"),s.rc(9),s.Qb(),s.Qb(),s.Rb(10,"div",4),s.Rb(11,"span"),s.rc(12),s.Qb(),s.Qb(),s.Rb(13,"div",5),s.Rb(14,"span"),s.rc(15),s.Qb(),s.Qb(),s.Rb(16,"div",6),s.Nb(17,"img",16),s.Qb(),s.Qb(),s.Nb(18,"i"),s.Qb()}if(2&t){const t=e.$implicit;s.zb(9),s.sc(t.name),s.zb(3),s.sc(t.artists[0].name),s.zb(3),s.sc(t.album.name||"\u672a\u77e5\u4e13\u8f91"),s.zb(2),s.fc("src",t.album.picUrl,s.lc)}}function S(t,e){1&t&&s.Nb(0,"mat-spinner",17)}const A=[{path:"",component:y,children:[{path:"boutique",component:v},{path:"search/:key",component:(()=>{class t{constructor(t,e,n,o,i){this.route=t,this.snackBar=e,this.musicNet=n,this.player=o,this.theme=i,this.searchResult=[],this.isloading=!1}ngOnInit(){this.route.paramMap.subscribe(t=>{this.search(decodeURI(t.get("key"))),this.isloading=!0});let t=document.getElementById("result-container");R.a.use(Q.a),R.a.use(z.a),R.a.use(k.a),new R.a(t,{scrollY:!0,click:!0,mouseWheel:{speed:20,invert:!1,easeTime:300},scrollbar:!0,probeType:3,observeDOM:!0}),document.querySelectorAll(".bscroll-indicator").forEach(t=>t.style.border="none")}search(t){return Object(P.a)(this,void 0,void 0,(function*(){this.isloading=!0,this.searchResult=[],this.musicNet.searchMusic(t).then(t=>{this.isloading=!1,this.searchResult=t})}))}get themeClass(){return this.theme.getThemeClass()}startPlay(t){t.url?this.player.addAndPlay(t):this.musicNet.getUrl(t).subscribe(e=>{200!=e.code||null==e.content?this.snackBar.openFromComponent(O.a,{duration:2500,data:"\u8fd9\u9996\u6b4c\u4e0d\u8ba9\u542c\u4e86\uff0c\u8bd5\u8bd5\u5176\u4ed6\u7684\u5427!"}):(t.url=e.content,this.player.addAndPlay(t))})}addToPlaylist(t){this.player.addToPlaylist(t)}getTimeFormat(t){return null==t?null:Math.floor(t/60).toString().padStart(2,"0")+":"+Math.floor(t%60).toString().padStart(2,"0")}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(i.a),s.Mb(N.a),s.Mb(x.a),s.Mb(M.b),s.Mb(m.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-search-result"]],decls:17,vars:4,consts:[["id","search-container"],["id","title-bar",1,"result-title"],["id","title-item",1,"result-item"],[1,"result-name"],[1,"result-artist"],[1,"result-album"],[1,"result-pic"],["id","result-container"],["id","r-ul"],["class","result-title",4,"ngFor","ngForOf"],["value","100","color","accent","id","spinner",4,"ngIf"],[1,"result-title"],[1,"option"],["title","\u6dfb\u52a0\u5230\u64ad\u653e\u5217\u8868",3,"click"],["title","\u64ad\u653e\u6b64\u66f2",3,"click"],[1,"result-item"],["onerror","this.src='../../../assets/img/music_white.jpg'",3,"src"],["value","100","color","accent","id","spinner"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"li",1),s.Rb(2,"div",2),s.Rb(3,"div",3),s.Rb(4,"span"),s.rc(5,"\u6b4c\u66f2"),s.Qb(),s.Qb(),s.Rb(6,"div",4),s.Rb(7,"span"),s.rc(8,"\u827a\u672f\u5bb6"),s.Qb(),s.Qb(),s.Rb(9,"div",5),s.Rb(10,"span"),s.rc(11,"\u4e13\u8f91"),s.Qb(),s.Qb(),s.Nb(12,"div",6),s.Qb(),s.Qb(),s.Rb(13,"div",7),s.Rb(14,"div",8),s.qc(15,I,19,4,"li",9),s.Qb(),s.Qb(),s.qc(16,S,1,0,"mat-spinner",10),s.Qb()),2&t&&(s.Bb(e.themeClass),s.zb(15),s.fc("ngForOf",e.searchResult),s.zb(1),s.fc("ngIf",e.isloading))},directives:[o.h,o.i,g.a,T.b],styles:["#search-container[_ngcontent-%COMP%]{height:85%;position:relative;padding:0 16px;display:block}#spinner[_ngcontent-%COMP%]{top:10%;left:40%;position:absolute}.result-title[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.6);list-style:none;width:85%;min-width:670px;position:relative;margin:20px auto;height:30px;display:inline-flex}.result-title[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{min-width:520px;width:80%;margin:auto;display:flex}.result-title[_ngcontent-%COMP%]   #title-item[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;width:100%;height:1px;background-color:#fff;opacity:.1;position:absolute}#title-bar[_ngcontent-%COMP%]{padding-left:8%;margin-top:0;margin-bottom:20px}#result-container[_ngcontent-%COMP%]{max-height:90%;height:90%;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}#result-container[_ngcontent-%COMP%]   #r-ul[_ngcontent-%COMP%]{transition-duration:.2s;transition-timing-function:ease-out;position:absolute;clear:both;width:100%}.option[_ngcontent-%COMP%]{width:10%;margin:20px 0 0;white-space:nowrap}.option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 10px;cursor:pointer}.option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#fff}.result-name[_ngcontent-%COMP%]{width:50%;text-align:left;position:relative;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.result-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:64px}.result-artist[_ngcontent-%COMP%]{width:25%;text-align:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.result-artist[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:64px}.result-album[_ngcontent-%COMP%]{width:20%;text-align:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.result-album[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:64px}.result-time[_ngcontent-%COMP%]{min-width:40px}.result-pic[_ngcontent-%COMP%]{min-width:60px}.result-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;padding-top:5px;-o-object-fit:cover;object-fit:cover}.scroll[_ngcontent-%COMP%]{width:8px;height:90%;background-color:hsla(0,0%,100%,.2);visibility:hidden;right:5%;top:5%}.bar[_ngcontent-%COMP%], .scroll[_ngcontent-%COMP%]{border-radius:5px;position:absolute}.bar[_ngcontent-%COMP%]{width:100%;height:0;background-color:rgba(0,0,0,.5);cursor:pointer}"]}),t})()}]}];let E=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[f.d,N.b,T.a,d,g.b,o.b,i.e.forChild(A)]]}),t})()}}]);